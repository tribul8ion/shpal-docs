# Настройка Telegram бота для обратной связи

## Шаг 1: Создание Telegram бота

1. Откройте Telegram и найдите [@BotFather](https://t.me/BotFather)
2. Отправьте команду `/newbot`
3. Следуйте инструкциям:
   - Укажите имя вашего бота (например: `Shpal Docs Feedback`)
   - Укажите username бота (например: `shpaldocs_feedback_bot`)
4. BotFather предоставит вам **токен бота** (выглядит как `123456789:ABCdefGHIjklMNOpqrsTUVwxyz`)
5. Сохраните токен — он понадобится позже

## Шаг 2: Получение Chat ID

### Вариант 1: Личный чат с ботом
1. Найдите вашего бота в Telegram по username
2. Начните разговор, отправив любое сообщение (например: `/start`)
3. Откройте браузер и перейдите по ссылке:
   ```
   https://api.telegram.org/bot<ВАШ_ТОКЕН>/getUpdates
   ```
   Замените `<ВАШ_ТОКЕН>` на токен, полученный от BotFather
4. В ответе найдите `"chat":{"id":123456789}` — это ваш Chat ID
5. Сохраните Chat ID

### Вариант 2: Через бота @userinfobot
1. Найдите бота [@userinfobot](https://t.me/userinfobot)
2. Отправьте `/start` — бот покажет ваш Chat ID

### Вариант 3: Групповой чат
Если хотите получать сообщения в группе:
1. Добавьте бота в группу
2. Сделайте бота администратором группы
3. Получите Chat ID группы через API:
   ```
   https://api.telegram.org/bot<ВАШ_ТОКЕН>/getUpdates
   ```
   Chat ID группы будет отрицательным числом (например: `-123456789`)

## Шаг 3: Настройка переменных окружения

### Для локальной разработки

Создайте файл `.env.local` в корне проекта:

```env
TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_CHAT_ID=123456789
```

### Для Vercel

1. Откройте ваш проект в [Vercel Dashboard](https://vercel.com/dashboard)
2. Перейдите в **Settings** → **Environment Variables**
3. Добавьте две переменные:
   - `TELEGRAM_BOT_TOKEN` = ваш токен бота
   - `TELEGRAM_CHAT_ID` = ваш Chat ID
4. Выберите окружения (Production, Preview, Development)
5. Сохраните изменения
6. Пересоберите проект (Redeploy)

## Проверка работы

После настройки переменных окружения:

1. Задеплойте проект
2. Перейдите на любую страницу документации
3. Внизу страницы вы увидите форму обратной связи
4. Отправьте тестовое сообщение через кнопку "Нашли ошибку?"
5. Проверьте Telegram — должно прийти сообщение от бота

## Безопасность

⚠️ **Важно:**
- Никогда не публикуйте токен бота и Chat ID в публичных репозиториях
- Добавьте `.env.local` в `.gitignore`
- Используйте переменные окружения Vercel для production

## Устранение проблем

### Сообщения не приходят в Telegram

1. Проверьте, что переменные окружения установлены корректно
2. Убедитесь, что бот активен и не заблокирован
3. Проверьте логи Vercel в разделе Functions
4. Убедитесь, что Chat ID правильный (для группы должен быть отрицательным)

### Ошибка "Bot token is invalid"

- Проверьте, что токен скопирован полностью и без пробелов
- Убедитесь, что токен начинается с номера и содержит двоеточие

### Ошибка "Chat not found"

- Проверьте, что вы начали разговор с ботом (отправили `/start`)
- Для группы убедитесь, что бот добавлен как администратор
