@import 'tailwindcss';
@import 'fumadocs-ui/css/vitepress.css';
@import 'fumadocs-ui/css/preset.css';
/* tailwindcss-animate плагин временно отключен из-за проблем с разрешением модулей в Turbopack */
/* Все нужные анимации уже добавлены через keyframes ниже */

/* Дополнительные настройки темы как в оригинале fumadocs-dev */
@theme {
  --spacing-fd-container: 1436px;
  --color-brand: hsl(55, 100%, 38%);
  --color-brand-foreground: white;
  --color-brand-secondary: #9b18dc;
  --color-brand-secondary-foreground: #efccff;
  --color-brand-200: hsl(41, 100%, 50%);

  --color-landing-foreground: #59592a;
  --color-landing-foreground-200: #a8a866;
}

/* Catppuccin имеет свои настройки sidebar - убираем кастомные для neutral */

.dark {
  --color-landing-foreground: #e4e2d0;
  --color-landing-foreground-200: #b7af7e;

  --color-brand: #fff383;
  --color-brand-secondary: #ad41e7;
  --color-brand-secondary-foreground: #f5e4ff;
  --color-brand-foreground: black;
  --color-brand-200: #fff7c8;
  
  --headless-color: hsl(250 100% 80%);
  --ui-color: #fff383;
}

/* Дополнительные цвета для UI как в оригинале */
.ui {
  --color-fd-primary: var(--ui-color);
}

.headless {
  --color-fd-primary: var(--headless-color);
}

:root {
  --headless-color: hsl(250, 80%, 54%);
  --ui-color: hsl(41, 100%, 40%);
}

/* Мобильные оптимизации */
@media (max-width: 768px) {
  /* Улучшенная прокрутка на iOS */
  body {
    -webkit-overflow-scrolling: touch;
  }
  
  /* Предотвращение zoom при фокусе на input */
  input, textarea, select {
    font-size: 16px !important;
  }
  
  /* Уменьшение отступов на мобильных */
  section {
    padding-left: 1rem !important;
    padding-right: 1rem !important;
  }
  
  /* Увеличение размера кнопок для тач-скринов */
  button, a {
    min-height: 44px;
    min-width: 44px;
  }
}

/* Прозрачный header */
header {
  background: var(--color-fd-background) !important;
  backdrop-filter: blur(16px) saturate(180%) !important;
  border-bottom: 1px solid var(--color-fd-border) !important;
  transition: all 0.3s ease !important;
  color: var(--color-fd-foreground) !important;
}

/* Header элементы используют цвета темы */
header * {
  color: var(--color-fd-foreground) !important;
}

header a,
header span,
header button {
  color: var(--color-fd-foreground) !important;
}

header button:hover {
  background-color: var(--color-fd-accent) !important;
  color: var(--color-fd-accent-foreground) !important;
}

header svg {
  color: var(--color-fd-foreground) !important;
  stroke: var(--color-fd-foreground) !important;
}

/* Мобильный TOC header (nd-tocnav) - темная тема */
.dark header#nd-tocnav,
[data-theme="dark"] header#nd-tocnav,
.dark [id="nd-tocnav"],
[data-theme="dark"] [id="nd-tocnav"] {
  background: var(--color-fd-background) !important;
  backdrop-filter: blur(16px) saturate(180%) !important;
  border-bottom: 1px solid var(--color-fd-border) !important;
  color: var(--color-fd-foreground) !important;
}

.dark header#nd-tocnav *,
[data-theme="dark"] header#nd-tocnav *,
.dark [id="nd-tocnav"] *,
[data-theme="dark"] [id="nd-tocnav"] * {
  color: var(--color-fd-foreground) !important;
}

.dark header#nd-tocnav a,
[data-theme="dark"] header#nd-tocnav a,
.dark [id="nd-tocnav"] a,
[data-theme="dark"] [id="nd-tocnav"] a {
  color: var(--color-fd-muted-foreground) !important;
}

.dark header#nd-tocnav span,
[data-theme="dark"] header#nd-tocnav span,
.dark [id="nd-tocnav"] span,
[data-theme="dark"] [id="nd-tocnav"] span {
  color: var(--color-fd-foreground) !important;
}

/* Мобильный TOC header (nd-tocnav) - светлая тема */
:root:not(.dark) header#nd-tocnav,
html:not([data-theme="dark"]) header#nd-tocnav,
[data-theme="light"] header#nd-tocnav,
:root:not(.dark) [id="nd-tocnav"],
html:not([data-theme="dark"]) [id="nd-tocnav"],
[data-theme="light"] [id="nd-tocnav"] {
  background: rgba(255, 255, 255, 0.95) !important;
  backdrop-filter: blur(16px) saturate(180%) !important;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1) !important;
  color: #0a0a0a !important;
}

:root:not(.dark) header#nd-tocnav *,
html:not([data-theme="dark"]) header#nd-tocnav *,
[data-theme="light"] header#nd-tocnav *,
:root:not(.dark) [id="nd-tocnav"] *,
html:not([data-theme="dark"]) [id="nd-tocnav"] *,
[data-theme="light"] [id="nd-tocnav"] * {
  color: #0a0a0a !important;
}

:root:not(.dark) header#nd-tocnav a,
html:not([data-theme="dark"]) header#nd-tocnav a,
[data-theme="light"] header#nd-tocnav a,
:root:not(.dark) [id="nd-tocnav"] a,
html:not([data-theme="dark"]) [id="nd-tocnav"] a,
[data-theme="light"] [id="nd-tocnav"] a {
  color: rgba(10, 10, 10, 0.9) !important;
}

:root:not(.dark) header#nd-tocnav span,
html:not([data-theme="dark"]) header#nd-tocnav span,
[data-theme="light"] header#nd-tocnav span,
:root:not(.dark) [id="nd-tocnav"] span,
html:not([data-theme="dark"]) [id="nd-tocnav"] span,
[data-theme="light"] [id="nd-tocnav"] span {
  color: #0a0a0a !important;
}

:root:not(.dark) header#nd-tocnav svg,
html:not([data-theme="dark"]) header#nd-tocnav svg,
[data-theme="light"] header#nd-tocnav svg,
:root:not(.dark) [id="nd-tocnav"] svg,
html:not([data-theme="dark"]) [id="nd-tocnav"] svg,
[data-theme="light"] [id="nd-tocnav"] svg {
  color: #0a0a0a !important;
  stroke: #0a0a0a !important;
}

/* Используем переменные fumadocs для TOC header */
header#nd-tocnav {
  background-color: var(--color-fd-background) !important;
  color: var(--color-fd-foreground) !important;
  border-bottom-color: var(--color-fd-border) !important;
}

/* Мобильный header навигации (nd-subnav) - темная тема */
.dark header#nd-subnav,
[data-theme="dark"] header#nd-subnav,
.dark [id="nd-subnav"],
[data-theme="dark"] [id="nd-subnav"] {
  background: var(--color-fd-background) !important;
  backdrop-filter: blur(16px) saturate(180%) !important;
  border-bottom: 1px solid var(--color-fd-border) !important;
  color: var(--color-fd-foreground) !important;
}

.dark header#nd-subnav *,
[data-theme="dark"] header#nd-subnav *,
.dark [id="nd-subnav"] *,
[data-theme="dark"] [id="nd-subnav"] * {
  color: var(--color-fd-foreground) !important;
}

.dark header#nd-subnav a,
[data-theme="dark"] header#nd-subnav a,
.dark [id="nd-subnav"] a,
[data-theme="dark"] [id="nd-subnav"] a {
  color: var(--color-fd-foreground) !important;
}

.dark header#nd-subnav button,
[data-theme="dark"] header#nd-subnav button,
.dark [id="nd-subnav"] button,
[data-theme="dark"] [id="nd-subnav"] button {
  color: var(--color-fd-foreground) !important;
}

.dark header#nd-subnav button:hover,
[data-theme="dark"] header#nd-subnav button:hover,
.dark [id="nd-subnav"] button:hover,
[data-theme="dark"] [id="nd-subnav"] button:hover {
  background-color: var(--color-fd-accent) !important;
  color: var(--color-fd-accent-foreground) !important;
}

.dark header#nd-subnav svg,
[data-theme="dark"] header#nd-subnav svg,
.dark [id="nd-subnav"] svg,
[data-theme="dark"] [id="nd-subnav"] svg {
  color: var(--color-fd-foreground) !important;
  stroke: var(--color-fd-foreground) !important;
}

.dark header#nd-subnav span,
[data-theme="dark"] header#nd-subnav span,
.dark [id="nd-subnav"] span,
[data-theme="dark"] [id="nd-subnav"] span {
  color: var(--color-fd-foreground) !important;
}

/* Мобильный header навигации (nd-subnav) - светлая тема */
:root:not(.dark) header#nd-subnav,
html:not([data-theme="dark"]) header#nd-subnav,
[data-theme="light"] header#nd-subnav,
:root:not(.dark) [id="nd-subnav"],
html:not([data-theme="dark"]) [id="nd-subnav"],
[data-theme="light"] [id="nd-subnav"] {
  background: rgba(255, 255, 255, 0.95) !important;
  backdrop-filter: blur(16px) saturate(180%) !important;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1) !important;
  color: #0a0a0a !important;
}

:root:not(.dark) header#nd-subnav *,
html:not([data-theme="dark"]) header#nd-subnav *,
[data-theme="light"] header#nd-subnav *,
:root:not(.dark) [id="nd-subnav"] *,
html:not([data-theme="dark"]) [id="nd-subnav"] *,
[data-theme="light"] [id="nd-subnav"] * {
  color: #0a0a0a !important;
}

:root:not(.dark) header#nd-subnav a,
html:not([data-theme="dark"]) header#nd-subnav a,
[data-theme="light"] header#nd-subnav a,
:root:not(.dark) [id="nd-subnav"] a,
html:not([data-theme="dark"]) [id="nd-subnav"] a,
[data-theme="light"] [id="nd-subnav"] a {
  color: #0a0a0a !important;
}

:root:not(.dark) header#nd-subnav button,
html:not([data-theme="dark"]) header#nd-subnav button,
[data-theme="light"] header#nd-subnav button,
:root:not(.dark) [id="nd-subnav"] button,
html:not([data-theme="dark"]) [id="nd-subnav"] button,
[data-theme="light"] [id="nd-subnav"] button {
  color: #0a0a0a !important;
}

:root:not(.dark) header#nd-subnav button:hover,
html:not([data-theme="dark"]) header#nd-subnav button:hover,
[data-theme="light"] header#nd-subnav button:hover,
:root:not(.dark) [id="nd-subnav"] button:hover,
html:not([data-theme="dark"]) [id="nd-subnav"] button:hover,
[data-theme="light"] [id="nd-subnav"] button:hover {
  background-color: rgba(0, 0, 0, 0.05) !important;
  color: #0a0a0a !important;
}

:root:not(.dark) header#nd-subnav svg,
html:not([data-theme="dark"]) header#nd-subnav svg,
[data-theme="light"] header#nd-subnav svg,
:root:not(.dark) [id="nd-subnav"] svg,
html:not([data-theme="dark"]) [id="nd-subnav"] svg,
[data-theme="light"] [id="nd-subnav"] svg {
  color: #0a0a0a !important;
  stroke: #0a0a0a !important;
}

:root:not(.dark) header#nd-subnav span,
html:not([data-theme="dark"]) header#nd-subnav span,
[data-theme="light"] header#nd-subnav span,
:root:not(.dark) [id="nd-subnav"] span,
html:not([data-theme="dark"]) [id="nd-subnav"] span,
[data-theme="light"] [id="nd-subnav"] span {
  color: #0a0a0a !important;
}

/* Используем переменные fumadocs для subnav header */
header#nd-subnav {
  background-color: var(--color-fd-background) !important;
  color: var(--color-fd-foreground) !important;
  border-bottom-color: var(--color-fd-border) !important;
}

header[data-transparent="top"] {
  background: transparent !important;
  border-bottom-color: transparent !important;
}

/* Для главной страницы - скрыть header */
header[data-transparent="top"] {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  height: 0 !important;
  overflow: hidden !important;
}

/* Скрыть header с id="nd-nav" на главной странице */
header#nd-nav,
header[id="nd-nav"] {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  height: 0 !important;
  overflow: hidden !important;
  pointer-events: none !important;
}

/* Убрать отступ сверху у main на главной странице */
main#nd-home-layout,
main[id="nd-home-layout"] {
  padding-top: 0 !important;
  margin-top: 0 !important;
}

/* Прозрачный nav внутри header */
header[data-transparent="top"] nav,
header[data-transparent="top"] nav[data-orientation="horizontal"],
header[data-transparent="top"] > nav {
  background: transparent !important;
}

/* Прозрачные кнопки и элементы внутри nav - более агрессивные правила */
header[data-transparent="top"] nav button,
header[data-transparent="top"] nav button[data-search-full],
header[data-transparent="top"] nav button[data-search],
header[data-transparent="top"] nav button[data-theme-toggle],
header[data-transparent="top"] nav button[aria-label*="Search"],
header[data-transparent="top"] nav button[aria-label*="Toggle"],
header[data-transparent="top"] nav button[aria-label*="Menu"] {
  background: transparent !important;
  background-color: transparent !important;
  border-color: rgba(255, 255, 255, 0.2) !important;
}

/* Переопределяем классы Tailwind для прозрачности */
header[data-transparent="top"] nav button.bg-fd-secondary,
header[data-transparent="top"] nav button[class*="bg-fd-secondary"],
header[data-transparent="top"] nav button[class*="bg-fd-background"],
header[data-transparent="top"] nav button[class*="bg-fd-accent"] {
  background: transparent !important;
  background-color: transparent !important;
}

header[data-transparent="top"] nav button:hover,
header[data-transparent="top"] nav button[data-search-full]:hover,
header[data-transparent="top"] nav button[data-theme-toggle]:hover {
  background: rgba(255, 255, 255, 0.1) !important;
  background-color: rgba(255, 255, 255, 0.1) !important;
}

/* Прозрачные div внутри nav */
header[data-transparent="top"] nav div,
header[data-transparent="top"] nav > div {
  background: transparent !important;
  background-color: transparent !important;
}

/* Прозрачные kbd элементы */
header[data-transparent="top"] nav kbd,
header[data-transparent="top"] nav kbd.bg-fd-background,
header[data-transparent="top"] nav kbd[class*="bg-fd-background"] {
  background: rgba(255, 255, 255, 0.1) !important;
  background-color: rgba(255, 255, 255, 0.1) !important;
  border-color: rgba(255, 255, 255, 0.2) !important;
}

/* Прозрачные ul внутри nav */
header[data-transparent="top"] nav ul {
  background: transparent !important;
  background-color: transparent !important;
}

/* Прозрачные все элементы с классами fumadocs - очень агрессивно */
header[data-transparent="top"] nav [class*="bg-fd-secondary"],
header[data-transparent="top"] nav [class*="bg-fd-background"],
header[data-transparent="top"] nav [class*="bg-fd-accent"],
header[data-transparent="top"] nav button[class*="bg-fd"],
header[data-transparent="top"] nav div[class*="bg-fd"],
header[data-transparent="top"] nav [class*="bg-fd-secondary/50"],
header[data-transparent="top"] nav [class*="bg-fd-secondary/"],
header[data-transparent="top"] nav button[class*="border"] {
  background: transparent !important;
  background-color: transparent !important;
}

/* Специально для кнопки поиска с классом bg-fd-secondary/50 */
header[data-transparent="top"] nav button[data-search-full][class*="bg-fd-secondary"] {
  background: transparent !important;
  background-color: transparent !important;
}

/* Переопределяем все возможные варианты фона в nav */
header[data-transparent="top"] nav * {
  background-color: transparent !important;
}

header[data-transparent="top"] nav button,
header[data-transparent="top"] nav div {
  background-color: transparent !important;
}

/* Дополнительно для главной страницы - скрыть header */
body > div > header[data-transparent="top"],
[data-pathname="/"] header,
html body header[data-transparent="top"] {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  height: 0 !important;
  overflow: hidden !important;
}

header[data-transparent="none"] {
  background: var(--color-fd-background) !important;
  border-bottom: 1px solid var(--color-fd-border) !important;
}

/* Скрыть поиск и переключатель темы */
header button[aria-label*="Search"],
header button[aria-label*="search"],
header [role="search"],
header .search-toggle,
header button[aria-label*="Toggle"],
header button[aria-label*="theme"],
header button[aria-label*="Theme"],
header [data-theme-toggle],
nav [role="search"],
nav button[type="button"][class*="search"],
[data-search-toggle],
button[data-search],
[class*="search-toggle"],
[class*="SearchToggle"],
nav > div > button,
header nav > div:last-child,
header nav > div:has(button[aria-label]),
/* Скрыть контейнер с кнопками в правой части */
header nav > div:has(kbd) {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  pointer-events: none !important;
}


.border-s a:hover {
  color: var(--color-fd-primary);
}

/* Плавные анимации и улучшения UX из fumadocs-dev */
@theme inline {
  --default-mono-font-family: var(--font-mono);
  --animate-marquee: marquee var(--duration) infinite linear;
  --animate-marquee-vertical: marquee-vertical var(--duration) linear infinite;

  @keyframes marquee {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(calc(-100% - var(--gap)));
    }
  }

  @keyframes marquee-vertical {
    from {
      transform: translateY(0);
    }
    to {
      transform: translateY(calc(-100% - var(--gap)));
    }
  }

  @keyframes stroke {
    from {
      stroke-dasharray: 1000;
    }
    to {
      stroke-dasharray: 1000;
      stroke-dashoffset: 2000;
    }
  }

  --animate-stroke: stroke 5s linear infinite;

  --color-gradient-radial: radial-gradient(circle, var(--tw-gradient-stops));
  --color-repeat-gradient-to-r: repeating-linear-gradient(
    to right,
    var(--tw-gradient-stops)
  );
  --color-repeat-gradient-to-br: repeating-linear-gradient(
    to bottom right,
    var(--tw-gradient-stops)
  );
}

/* Дополнительные анимации из оригинального fumadocs-dev */
@keyframes circuit_1 {
  0% {
    transform: translateY(-20px);
  }

  100% {
    transform: translateY(100px);
  }
}

@keyframes circuit_1_x_energy {
  0%,
  46% {
    opacity: 0;
    transform: translateX(-20px);
  }
  47%,
  70% {
    opacity: 100%;
  }
  100% {
    opacity: 0;
    transform: translateX(212px);
  }
}

/* Улучшенное поведение прокрутки и шрифты */
body {
  overscroll-behavior-y: none;
  background-color: var(--color-fd-background);
  font-family: var(--font-sans, ui-sans-serif, system-ui, sans-serif);
}

/* Опциональный фоновый градиент для dark mode (можно раскомментировать) */
/* .dark body {
  background-image: linear-gradient(
    rgba(5, 105, 255, 0.15),
    transparent 20rem,
    transparent
  );
  background-repeat: no-repeat;
} */

/* Применение моноширинного шрифта для кода */
code,
pre,
kbd,
samp {
  font-family: var(--font-mono, ui-monospace, 'Courier New', monospace);
}

/* Улучшения таблиц - современный стиль из fumadocs-dev */
.prose table {
  @apply w-full border-collapse border border-fd-border rounded-lg overflow-hidden;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
}

.prose thead {
  @apply bg-fd-muted/50;
}

.prose th {
  @apply px-4 py-3 text-left text-sm font-semibold text-fd-foreground border-b border-fd-border;
}

.prose td {
  @apply px-4 py-3 text-sm text-fd-muted-foreground border-b border-fd-border;
  transition: background-color 0.15s ease;
}

.prose tbody tr:hover td {
  @apply bg-fd-accent/30;
}

.prose tbody tr:last-child td {
  @apply border-b-0;
}

/* Плавные transitions для ссылок и кнопок */
a,
button {
  transition: all 0.2s ease;
}

/* Улучшенные стили для Callout - более современный вид */
.prose [data-callout] {
  @apply rounded-lg border-l-4 p-4 my-4;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
  transition: box-shadow 0.2s ease;
}

.prose [data-callout]:hover {
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

/* Убрано fade-in для всего контента - слишком агрессивно */

/* Улучшения CodeBlock - современный стиль из fumadocs-dev */
.shiki,
.prose pre,
.prose code[class*="language"] {
  @apply rounded-lg border border-fd-border;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
  transition: box-shadow 0.2s ease;
}

.shiki:hover,
.prose pre:hover {
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

/* Улучшенный скроллбар для CodeBlock */
.fd-scroll-container,
.shiki div[class*="overflow-auto"],
.prose pre {
  scrollbar-width: thin;
  scrollbar-color: var(--color-fd-border) transparent;
}

.fd-scroll-container::-webkit-scrollbar,
.shiki div[class*="overflow-auto"]::-webkit-scrollbar,
.prose pre::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.fd-scroll-container::-webkit-scrollbar-track,
.shiki div[class*="overflow-auto"]::-webkit-scrollbar-track,
.prose pre::-webkit-scrollbar-track {
  background: transparent;
  border-radius: 4px;
}

.fd-scroll-container::-webkit-scrollbar-thumb,
.shiki div[class*="overflow-auto"]::-webkit-scrollbar-thumb,
.prose pre::-webkit-scrollbar-thumb {
  background: var(--color-fd-border);
  border-radius: 4px;
  transition: background-color 0.2s ease;
}

.fd-scroll-container::-webkit-scrollbar-thumb:hover,
.shiki div[class*="overflow-auto"]::-webkit-scrollbar-thumb:hover,
.prose pre::-webkit-scrollbar-thumb:hover {
  background: var(--color-fd-muted-foreground);
}

/* Улучшенная кнопка копирования в CodeBlock */
.shiki button[aria-label*="Copy"],
.prose figure button[aria-label*="Copy"] {
  @apply transition-all duration-200;
  backdrop-filter: blur(8px);
}

.shiki button[aria-label*="Copy"]:hover,
.prose figure button[aria-label*="Copy"]:hover {
  @apply scale-110;
  transform: scale(1.1);
}

.shiki button[data-checked="true"],
.prose figure button[data-checked="true"] {
  @apply text-fd-primary;
}

/* Плавные transitions для inline code */
.prose code:not(pre code) {
  @apply px-1.5 py-0.5 rounded bg-fd-muted text-fd-foreground;
  font-size: 0.9em;
  transition: background-color 0.2s ease, color 0.2s ease;
}

.prose code:not(pre code):hover {
  @apply bg-fd-accent;
}

/* Улучшенные стили для строк кода */
.prose pre code {
  @apply font-mono;
  font-feature-settings: 'liga' 0;
}

/* Убираем fade-in анимацию для CodeBlock - в оригинале её нет */

/* Cards компонент - точные стили как в оригинале fumadocs-dev */
/* Все стили применяются через className в компоненте Card - никаких дополнительных анимаций */
